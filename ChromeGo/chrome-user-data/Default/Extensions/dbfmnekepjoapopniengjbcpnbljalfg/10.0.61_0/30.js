(window.webpackJsonp=window.webpackJsonp||[]).push([[30,7,13,33,34,39,40],{122:function(e,t,i){"use strict";i.r(t),i.d(t,"iMessage",(function(){return u})),i.d(t,"message",(function(){return d}));i(13),i(17);var o=i(358),n=i(1),s=i(344),a=i(393),r=i.n(a),c=i(394),l=i.n(c),p=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};let u=class extends n.a{constructor(){super(...arguments),this.content="",this.type="error"}render(){const e={"infinity-message":!0,"position-top":"top"===this.type};return n.e`
      <div class=${Object(s.a)(e)}>
        ${this.renderImg()}
        <span>${this.content}</span>
      </div>
    `}renderImg(){return"error"===this.type?n.e`<img .src=${r.a} />`:"warn"===this.type?n.e`<img .src=${l.a} />`:void 0}};u.styles=n.b`
    :host {
      box-sizing: border-box;
      display: flex;
      position: fixed;
      min-width: 330px;
      padding: 0 20px;
      height: 60px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 1);
      box-shadow: 0px 6px 48px 0px rgba(0, 0, 0, 0.24);
      border-radius: 6px;
      z-index: 99999999999;
    }
    :host([type='top']) {
      width: 100%;
      margin: 0;
      left: 0;
      top: var(--top-bar-height);
      height: auto;
      padding: 5px;
      border-radius: 0;
      background: rgba(95, 92, 92, 0.6);
      color: #fff;
      transform: none;
      transition: all 300ms;
      opacity: 0;
      pointer-events: none;
    }
    :host(.anim[type='top']) {
      opacity: 1;
    }

    .infinity-message {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    img {
      width: 20px;
      height: 20px;
      margin-right: 8px;
    }
  `,p([Object(n.g)({type:String})],u.prototype,"content",void 0),p([Object(n.g)({type:String})],u.prototype,"type",void 0),u=p([Object(n.c)("i-message")],u);const d={newInstance:function(e,t=2,i,o){let n;if(document.querySelector("i-message"))return void clearInterval(n);const s=document.createElement("i-message");return s.setAttribute("content",e),s.setAttribute("type",i),document.body.appendChild(s),0!==t&&(n=setTimeout(()=>{document.body.removeChild(s),o&&o()},1e3*t)),s},error:function(e,t,i){o.default.error(e,t),i&&setTimeout(i,t)},success:function(e,t,i){o.default.success(e,t),i&&setTimeout(i,t)},top:function(e,t,i){const o=this.newInstance(e,t,"top",i);setTimeout(()=>null==o?void 0:o.classList.add("anim"))},warn:function(e,t,i){this.newInstance(e,t,"warn",i)}}},130:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));var o=i(188);const n={notice:{gmail:!1,gmailVoice:!1,gmailNumber:!1,todoNumber:!0},link:{icon:!!i(0).r,search:!0,bookmark:!1,history:!1},view:{topBookmark:!1,topUseful:!1,windmill:!0,pagin:!1,isShowHomepageBtn:!0,isHideIcp:!1,scaleSide:1,scaleMain:1},layout:{row:2,col:5,rowGap:.2,colGap:.3,custom:!1,customItem:[3,4]},animation:{easing:"linear"},icon:{miniMode:!1,shadow:!1,startAnimation:!1,opacity:1,radius:.5,scale:.5,isHideIconName:!1},search:{hide:!1,searchSuggest:!0,hideCategory:!1,hideButton:!0,shadow:!0,scale:.82,radius:o.i,opacity:1},font:{shadow:!0,size:15,color:"rgb(221, 221, 221)"}},s=function(e,t){let i=null;switch(e+"*"+t){case"2*4":case"2*5":i={iconScale:.5,colGap:.3,rowGap:.2,searchScale:.82};break;case"2*6":i={iconScale:.6,colGap:.3,rowGap:.3,searchScale:.9};break;case"2*7":i={iconScale:.7,colGap:.3,rowGap:.3,searchScale:.9};break;case"3*3":i={iconScale:.7,colGap:.24,rowGap:.2,searchScale:.82}}return i}},178:function(e,t,i){"use strict";i.r(t),i.d(t,"slave",(function(){return r}));i(10),i(13),i(17),i(52);var o=i(7),n=i.n(o),s=i(259),a=i(123);const r=new class{constructor(){if(this.channel=null,this.initResolve=[],this.initReject=[],this.messageScheduler=new s.a,this.initChannel=()=>{"serviceworker"===a.b?this.initServiceworker():"background"===a.b&&this.initBackground()},this.awaitChannel=()=>new n.a(async(e,t)=>{"serviceworker"===a.b?this.channel?(await this.channel.active,await this.channel.controlling,e(null)):(this.initResolve.push(e),this.initReject.push(t)):"background"===a.b&&e(null)}),this.initServiceworker=async()=>{try{const{createWorkBox:e}=await i.e(12).then(i.bind(null,575)),t=await e();if(!t)return;t.addEventListener("message",e=>{const{type:t,payload:i={}}=e.data;"master:bordcast-message"===t&&this.messageScheduler.execTask(i.type,i.payload)}),await t.active,await t.controlling,this.channel=t,this.initResolve.forEach(e=>{e()}),this.channel.postTask=this.channel.messageSW}catch(e){console.log("slave初始化错误：",e),this.initReject.forEach(e=>{e()})}},this.initBackground=()=>{this.channel={postTask:e=>new n.a((t,i)=>{chrome.runtime.sendMessage(e,e=>{chrome.runtime.lastError&&i(chrome.runtime.lastError),t(e)})})},chrome.runtime.onMessage.addListener(({type:e,payload:t,ignoreId:i})=>{"master:bordcast-message"===e?chrome.tabs.getCurrent(e=>{i!==e.id&&this.messageScheduler.execTask(t.type,t.payload)}):"slave:bordcast-message"===e&&this.messageScheduler.execTask(t.data.type,t.data.payload)})},a.a)throw new Error("it's not page");this.initChannel()}postTask(e,t,i){return new n.a(async(o,n)=>{let s=!1;await this.awaitChannel();const r=Object.assign(Object.assign(Object.assign({},a.d),{taskId:Object(a.c)()}),i);r.timeout&&setTimeout(()=>{s||o({error:"timeout"})},r.timeout);try{const i=await this.channel.postTask({type:e,payload:Object.assign({data:t},r)});s=!0,o(i)}catch(e){o({error:e})}})}listenMessage(e,t){this.messageScheduler.listenTask(e,t)}sendMessage(e,t=""){this.postTask("slave:bordcast-message",{type:e,payload:t})}}},194:function(e,t,i){"use strict";i.d(t,"e",(function(){return c})),i.d(t,"a",(function(){return l})),i.d(t,"c",(function(){return p})),i.d(t,"b",(function(){return u})),i.d(t,"g",(function(){return d})),i.d(t,"j",(function(){return g})),i.d(t,"f",(function(){return m})),i.d(t,"i",(function(){return b})),i.d(t,"d",(function(){return f})),i.d(t,"h",(function(){return y}));i(13),i(17),i(52);var o=i(105),n=i.n(o),s=i(2),a=i(0),r=i(23);const c={name:Object(s.i18n)("search"),uuid:"dd3af9cc97ad7de8984baaf59514bb52",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/mychromesearch.png",desc:"",types:[{name:Object(s.i18n)("html"),url:"https://www.google.com/search?q="},{name:Object(s.i18n)("photos"),url:"https://www.google.com/search?tbm=isch&q="},{name:Object(s.i18n)("news"),url:"https://www.google.com/search?tbm=nws&q="},{name:Object(s.i18n)("videos"),url:"https://www.google.com/search?tbm=vid&q="},{name:Object(s.i18n)("map"),url:"https://www.google.com/maps/preview?q="}]},l={name:Object(s.i18n)("baidu"),uuid:"0c47016a8cd2d631bc618d4f3a741335",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/baidu.png",desc:Object(s.i18n)("most_used_in_chinese"),types:[{name:Object(s.i18n)("html"),url:"https://www.baidu.com/s?tn=02003390_hao_pg&ie=utf-8&wd="},{name:Object(s.i18n)("photos"),url:"https://image.baidu.com/search/index?isource=infinity&iname=baidu&tn=baiduimage&word="},{name:Object(s.i18n)("news"),url:"https://news.baidu.com/ns?isource=infinity&iname=baidu&tn=news&ie=utf-8&word="},{name:Object(s.i18n)("videos"),url:"https://video.baidu.com/v?isource=infinity&iname=baidu&ie=utf-8&word="},{name:Object(s.i18n)("map"),url:"http://map.baidu.com/?isource=infinity&iname=baidu&newmap=1&ie=utf-8&s=s%26wd%3D"}]},p={name:Object(s.i18n)("google"),uuid:"a22dcc25c75de3f58cb518e32c576865",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/google.png",desc:Object(s.i18n)("google_desc"),types:[{name:Object(s.i18n)("html"),url:"https://www.google.com/search?q="},{name:Object(s.i18n)("photos"),url:"https://www.google.com/search?isource=infinity&iname=google&tbm=isch&q="},{name:Object(s.i18n)("news"),url:"https://www.google.com/search?isource=infinity&iname=google&tbm=nws&q="},{name:Object(s.i18n)("videos"),url:"https://www.google.com/search?isource=infinity&iname=google&tbm=vid&q="},{name:Object(s.i18n)("map"),url:"https://www.google.com/maps/preview?isource=infinity&iname=google&q="}]},u={name:Object(s.i18n)("bing"),uuid:"5a6afaa65c95a841f6149c4e1591a637",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/bing_new.png",desc:Object(s.i18n)("bing_desc"),types:[{name:Object(s.i18n)("html"),url:"https://cn.bing.com/search?isource=infinity&iname=bing&itype=web&q="},{name:Object(s.i18n)("photos"),url:"https://cn.bing.com/images/search?isource=infinity&iname=bing&q="},{name:Object(s.i18n)("news"),url:"https://global.bing.com/news/search?isource=infinity&iname=bing&q="},{name:Object(s.i18n)("videos"),url:"https://cn.bing.com/videos/search?isource=infinity&iname=bing&q="},{name:Object(s.i18n)("map"),url:"https://www.bing.com/ditu/?isource=infinity&iname=bing&q="}]},d=[l,p,u,{name:Object(s.i18n)("yahoo"),uuid:"C26068F55492EF9E93E05E34A3B31139",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/yahoo.png",desc:Object(s.i18n)("yahoo_desc"),types:[{name:Object(s.i18n)("html"),url:"https://search.yahoo.com/search?isource=infinity&iname=yahoo&itype=web&p="},{name:Object(s.i18n)("photos"),url:"https://images.search.yahoo.com/search?isource=infinity&iname=yahoo&p="},{name:Object(s.i18n)("news"),url:"https://news.search.yahoo.com/search?isource=infinity&iname=yahoo&p="},{name:Object(s.i18n)("videos"),url:"https://video.search.yahoo.com/search/video?isource=infinity&iname=yahoo&p="}]},{name:Object(s.i18n)("yandex"),uuid:"f33155f8c51a36fb76dad667dec7e44f",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/yandex.png",desc:Object(s.i18n)("yandex_desc"),types:[{name:Object(s.i18n)("html"),url:"https://yandex.com/search/?isource=infinity&itype=web&iname=yandex&text="},{name:Object(s.i18n)("photos"),url:"https://yandex.com/images/search?isource=infinity&iname=yandex&text="},{name:Object(s.i18n)("news"),url:"https://news.yandex.com/yandsearch?isource=infinity&iname=yandex&text="},{name:Object(s.i18n)("videos"),url:"https://yandex.com/video/search?isource=infinity&iname=yandex&text="}]},{name:Object(s.i18n)("duckduckgo"),uuid:"569CD6FB4F6502B918DB8B30EC235384",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/duckduckgo.png",desc:Object(s.i18n)("duckduckgo_desc"),types:[{name:Object(s.i18n)("html"),url:"https://duckduckgo.com/?isource=infinity&iname=duckduckgo&itype=web&q="},{name:Object(s.i18n)("photos"),url:"https://duckduckgo.com/?isource=infinity&iname=duckduckgo&t=h_&dbexp=a&iax=1&ia=images&q="},{name:Object(s.i18n)("news"),url:"https://duckduckgo.com/?isource=infinity&iname=duckduckgo&t=h_&dbexp=a&ia=news&q="},{name:Object(s.i18n)("videos"),url:"https://duckduckgo.com/?isource=infinity&iname=duckduckgo&t=h_&iax=1&ia=videos&q="}]},{name:Object(s.i18n)("n_360"),uuid:"70adaba7374f6089aca0374dea85df00",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/360.png",desc:Object(s.i18n)("360_desc"),types:[{name:Object(s.i18n)("html"),url:"https://www.so.com/s?src=lm&ls=sm2054017&lm_extend=ctype:4&q="},{name:Object(s.i18n)("photos"),url:"https://image.so.com/i?isource=infinity&iname=360&src=infinitynewtab&q="},{name:Object(s.i18n)("news"),url:"http://news.so.com/ns?isource=infinity&iname=360&src=infinitynewtab&q="},{name:Object(s.i18n)("videos"),url:"http://video.so.com/v?isource=infinity&iname=360&src=infinitynewtab&q="}]},{name:Object(s.i18n)("sougou"),uuid:"a3e908082e31a92396970f8b58583863",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/sougou.png",desc:Object(s.i18n)("sougou_desc"),types:[{name:Object(s.i18n)("html"),url:"https://www.sogou.com/sogou?isource=infinity&iname=sogou&itype=web&pid=sogou-site-7985672db979303a&query="},{name:Object(s.i18n)("photos"),url:"https://pic.sogou.com/pics?isource=infinity&iname=sogou&ie=utf8&query="},{name:Object(s.i18n)("news"),url:"http://news.sogou.com/news?isource=infinity&iname=sogou&ie=utf8&query="},{name:Object(s.i18n)("videos"),url:"http://v.sogou.com/v?isource=infinity&iname=sogou&ie=utf8&query="},{name:Object(s.i18n)("wechat"),url:"http://weixin.sogou.com/weixin?isource=infinity&iname=sogou&type=2&ie=utf8&query="}]},{name:Object(s.i18n)("yarndex_ru"),uuid:"ff1ca8c4e6661d52440b7f2e15cb6a13",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/russia-yandex.png",desc:Object(s.i18n)("yandex_desc"),types:[{name:Object(s.i18n)("html"),url:"https://yandex.ru/search/?text="},{name:Object(s.i18n)("photos"),url:"https://yandex.ru/images/search?text="},{name:Object(s.i18n)("news"),url:"https://news.yandex.ru/yandsearch?text="},{name:Object(s.i18n)("videos"),url:"https://yandex.ru/video/search?text="}]}],h={"zh-CN":[{name:Object(s.i18n)("tian_mao"),uuid:"be0ab26cf4dc6239c98791f7b18b633a",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/2f301c86bb2d0efeec3d49930147157f.png",type:"web",target:"https://s.click.taobao.com/t?e=m%3D2%26s%3DV5ucSP%2F1kT4cQipKwQzePCperVdZeJviK7Vc7tFgwiFRAdhuF14FMRBynALhehQ4RitN3%2FurF3xNWm%2FATOfjswMAKinyMfntv%2FFgqkVH8133BMlVy3qlGE2srC8Mk09eQgZss1jm63jcHtRpEUy6RPalRWTdFmFpJPwiig1bxLMnyi1UQ%2F17I10hO9fBPG8oXH%2BQH9e66Y4%3D"},{name:Object(s.i18n)("jindong_shopping"),uuid:"6dcbbe4e9dc6ef2fd68da7d8befd117c",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/cee009549b352def723ba09d6da4b742.png",type:"web",target:"https://www.infinitynewtab.com/jd.pro.html"},{name:Object(s.i18n)("xie_cheng"),uuid:"afe7a96e6db449e6199df118756d5672",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/f6ec2e6ee20fe198f81cf620413bc35b.png",bgType:"image",type:"web",target:"http://www.ctrip.com/?allianceid=1050724&sid=1786019"},{name:Object(s.i18n)("i_taobao"),uuid:"c4ba1648d4014bad7fdea130cd421589",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/346647fb95fbac4d303c93fa0a4936d3.png",type:"web",target:"https://ai.taobao.com/?pid=mm_50570328_39070332_145428725"}],default:[{uuid:"4299970b2e054e9a39450e6f854a684c",name:"Amazon",target:"https://inftab.com/amazon/",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/e67eed044bf08fbcac16a0527fcc165a.png",bgType:"image",type:"web"},{uuid:"912ed4e109a1cde4b956fa8a1670fae2",name:"eBay",target:"https://www.ebay.com?mkcid=1&mkrid=711-53200-19255-0&siteid=0&campid=5338095340&customid=infinity&toolid=10001&mkevt=1",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/ebay.png",bgType:"image",type:"web"},{uuid:"080772d54828d47e7f8ce223c66f36df",name:"Booking",target:"https://www.booking.com/index.html?aid=1267011",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/83e58c13ed40dc8393297d43d2639cce.png",bgType:"image",type:"web"},{uuid:"66117abb3659ad746baadc8c1e0b28df",name:"Twitter",target:"https://twitter.com",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/0c7e5d8b40c38cde576595b23546cc91.png",bgType:"image",type:"web"}]},g={name:Object(s.i18n)("weather"),uuid:"eed2a9287b324510678cd5e714888e99",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/assets/weather/default.png",type:"app",bgColor:"#36B3FF",target:"infinity://weather"},m=e=>{var t;return n()(t=[g,{name:Object(s.i18n)("todos"),uuid:"c09f31db43d7faca5bf659fadad3967c",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/6e49210c084629259f22609980c48ecf.png",type:"app",target:"infinity://todos"},{name:Object(s.i18n)("notes"),uuid:"ea5ac5d9e9e08c1d57ad413e9e38d376",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/006b88c07a2e87d5a61f3c969a70575c.png",type:"app",target:"infinity://notes"},a.l&&{name:Object(s.i18n)("history"),uuid:"4528cef4f8d66e661cb3143af733694e",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/history_2.png",type:"app",target:"infinity://history"},a.l&&{name:Object(s.i18n)("bookmarks"),uuid:"96646a13688f5bfd0aaf4811a579aee1",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/31a36139ccf4b9b005ec55445bf833b0.png",type:"app",target:"infinity://bookmarks"},{name:Object(s.i18n)("folder"),id:"folder-8001eiapfpq4dvihgz9dbn5dpmtpzu",uuid:"8001eiapfpq4dvihgz9dbn5dpmtpzu",children:[{name:"500px",uuid:"c5cb65ab55611b1d8bb2e09ad143b797",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/ee908304d3c7def64adc6b3e2aaac4df.png",type:"web",target:"https://500px.com"},{name:"9GAG",uuid:"739aca5f5ee9f27dd0ed29f03d58bd32",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/150127100951.png",type:"web",target:"http://www.9GAG.com"}]},...h[e]||h.default,{name:"Youtube",uuid:"60e546111669c1d829f962c8831a0926",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/37d396f9975e494b10ac8696d64ebb2a.png",type:"web",target:"https://youtube.com"},{name:Object(s.i18n)("exfans"),uuid:"6474696c6646280df5c4faa9b7fcae39",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/6474696c6646280df5c4faa9b7fcae39.png",type:"web",target:"https://extfans.com"},a.i&&{name:Object(s.i18n)("chrome_app_store"),uuid:"744e698c837a43c49fbd3e26753d7d3f",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/d2085270ca1ded965bfaac2d2a6b12dc.png",type:"web",target:"https://chrome.google.com/webstore/category/extensions"},a.k&&{name:Object(s.i18n)("edge_app_store"),uuid:"744e63c4998c83753d7d37a4fbd3e26f",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/eeedf66223852ae037aa58284858187d.png",type:"web",target:"https://microsoftedge.microsoft.com/addons"},a.n&&{name:Object(s.i18n)("firefox_app_store"),uuid:"743965befe82a5255fb48dcf7b848bbb",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/7ef4532818b99d9320879c3e4979fc01.png",type:"web",target:"https://addons.mozilla.org"},(a.i||a.k)&&{name:Object(s.i18n)("application"),uuid:"4e0da886cc15213d558a4c51b2623089",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/63cf498c5b3d20beaa0b1f38bda717f9.png",bgType:"image",type:"app",target:"infinity://chrome-apps"},{name:Object(s.i18n)("wallpaper_library"),uuid:"76e8e8a1cb47ef88dc9faaf52167aa9a",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/76e8e8a1cb47ef88dc9faaf52167aa9a.png",type:"app",target:"infinity://wallpaper"},(a.i||a.k)&&{name:Object(s.i18n)("extension"),uuid:"194dd7b46ac16ac93becf5386f14bcca",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/194dd7b46ac16ac93becf5386f14bcca.png",type:"app",target:"infinity://extension"},{name:Object(s.i18n)("settings"),uuid:"552fa3a378b29375843fa3d021cbe129",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/9622b98e90dd4f107d23481566095b34.png",type:"app",target:"infinity://settings"},{name:"Infinity Games",uuid:"5001b4d70b1c62f14859b51a6e8abd6f",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/icon/5001b4d70b1c62f14859b51a6e8abd6f.png",type:"web",target:"https://games.infinitynewtab.com/"},a.l&&{name:"Gmail",uuid:"01d0a35ebb602dde4dadd63887cc2a91",bgType:"image",bgImage:"https://infinityicon.infinitynewtab.com/user-share-icon/gmail_2.png",type:"app",target:"infinity://gmail"}].filter(e=>!!e)).call(t,(e,t,i)=>{t.id||(t.id="siteId-"+t.uuid),t.updatetime=0,t.children&&t.children.forEach(e=>{e.id="siteId-"+e.uuid,e.updatetime=0});const o=Math.floor(i/10);return e[o]||(e[o]=[]),e[o].push(t),e},[])},b=[{name:Object(s.i18n)("all_wallpaper_sources"),value:"all",desc:Object(s.i18n)("all_wallpaper_sources_desc"),img:Object(r.a)("source-all.png",!0)},{name:Object(s.i18n)("infinity_landscape_wallpaper_source"),value:"InfinityLandscape",desc:Object(s.i18n)("infinity_landscape_wallpaper_source_desc"),img:Object(r.a)("source-infinity-landscape.png",!0)},{name:Object(s.i18n)("infinity_comic_wallpaper_source"),value:"Infinity",desc:Object(s.i18n)("infinity_comic_wallpaper_source_desc"),img:Object(r.a)("source-infinity-comic.png",!0)},{name:"Bing",value:"bing",desc:Object(s.i18n)("bing_wallpaper_source_desc"),img:Object(r.a)("source-bing.png",!0)},{name:"Unsplash",value:"Unsplash",desc:Object(s.i18n)("unsplash_wallpaper_source_desc"),img:Object(r.a)("source-unsplash.png",!0)},{name:"Life Of Pix",value:"Life Of Pix",desc:Object(s.i18n)("life_of_pix_wallpaper_source_desc"),img:Object(r.a)("source-life-of-pix.png",!0)},{name:"MMT",value:"MMT",desc:Object(s.i18n)("mmt_wallpaper_source_desc"),img:Object(r.a)("source-mmt.png",!0)},{name:"Realistic Shots",value:"Realistic Shots",desc:Object(s.i18n)("realistic_shots_wallpaper_source_desc"),img:Object(r.a)("source-realistic-shots.png",!0)},{name:"Jay Mantri",value:"Jay Mantri",desc:Object(s.i18n)("jay_mantri_wallpaper_source_desc"),img:Object(r.a)("source-jay-mantri.png",!0)},{name:"Free Nature Stock",value:"Free Nature Stock",desc:Object(s.i18n)("free_nature_stock_wallpaper_source_desc"),img:Object(r.a)("source-free-nature-stock.png",!0)},{name:"Skitter Photo",value:"Skitter Photo",desc:Object(s.i18n)("skitter_photo_wallpaper_source_desc"),img:Object(r.a)("source-skitter-photo.png",!0)},{name:"Startup Stock Photos",value:"Startup Stock Photos",desc:Object(s.i18n)("startup_stock_wallpaper_source_desc"),img:Object(r.a)("source-startup-stock-photos.png",!0)},{name:"Barn Images",value:"Barn Images",desc:Object(s.i18n)("barn_images_wallpaper_source_desc"),img:Object(r.a)("source-barn.png",!0)},{name:"Picography",value:"Picography",desc:Object(s.i18n)("picography_wallpaper_source_desc"),img:Object(r.a)("source-picography.png",!0)}],f=["c00018","de8930","f7d946","cbe582","506f37","60a8d8","184878","be7ab9"],y=["action","aerial","bokeh","close-ups","curves","glare","landmarks","laptop","light rays","long-exposure"]},243:function(e,t,i){"use strict";i.d(t,"g",(function(){return g})),i.d(t,"d",(function(){return b})),i.d(t,"e",(function(){return w})),i.d(t,"j",(function(){return k})),i.d(t,"k",(function(){return O})),i.d(t,"c",(function(){return v})),i.d(t,"h",(function(){return x})),i.d(t,"i",(function(){return _})),i.d(t,"l",(function(){return T})),i.d(t,"a",(function(){return M})),i.d(t,"b",(function(){return P})),i.d(t,"f",(function(){return L}));var o=i(7),n=i.n(o),s=i(48),a=i.n(s),r=(i(10),i(18),i(44),i(52),i(0)),c=i(14),l=i(26),p=i.n(l),u=i(23);const d=document.querySelector(".wallpaper"),h="store-wallpaper-cache",g=e=>p.a.setItem("infinity-image-base64",e),m=c.a.debounce(async e=>{e&&e.currentP&&e.currentP.url&&"local"===e.type&&delete e.currentP.url,await p.a.setItem(h,e)},1e3/60),b=async()=>{try{const e=await p.a.getItem("infinity-image-base64");if(e)return e;if(!r.r){const e=(await new n.a(e=>chrome.storage.local.get("infinity-image-base64",e)))["infinity-image-base64"];if(e)return await p.a.setItem("infinity-image-base64",e),await new n.a(e=>chrome.storage.local.remove("infinity-image-base64",e)),e}throw new Error("throw")}catch(e){throw new Error("cannot find base64 url of current wallpaper")}},f="first-installed",y={},w=()=>JSON.parse(JSON.stringify(y)),k=e=>{Object.assign(y,e),m(y)};const O=e=>p.a.setItem(h,e);async function j(e){let t;return t=await fetch(e).then(e=>e.blob()),t}const v=e=>new n.a(t=>{const i=document.createElement("img");i.onload=()=>t(!0),i.onerror=()=>t(!1),i.src=e}),S=(e,t=0)=>new n.a(i=>{let o=document.createElement("img");o.onload=()=>i(!0),o.onerror=()=>i(!1),o.src=e,t>0&&setTimeout(()=>{o.src="",o=null,i(!1)},t)}),x=e=>{d.style.backgroundImage&&(d.style.backgroundImage=""),d.style.backgroundColor=e},_=e=>{d.style.backgroundColor&&(d.style.backgroundColor=""),u.c&&(e=e.replace(T,"")),d.style.backgroundImage=`url(${e})`},T="format/webp/",M="https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/default.png",P=`${M}?imageView2/2/w/${screen.width}/${u.c?"":T}interlace/1`,I=()=>{const e=[i(369),"https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/default.png"];return new n.a(t=>{let i=!1;e.forEach(e=>{const o=new Image;o.addEventListener("load",async()=>{i||(i=!0,_(e),t(e))}),o.src=e})})},L=async()=>{const e=(e=40,t=0)=>{const i={"--wallpaper-alpha":e/100,"--wallpaper-filter":t/5+"px"};Object.keys(i).forEach(e=>{document.body.style.setProperty(e,i[e])})},t=await async function(){const e=await p.a.getItem(h);if(e)return e;if(!r.r){const e=(await new n.a(e=>chrome.storage.local.get(e)))[h];if(e)return await p.a.setItem(h,e),await new n.a(e=>chrome.storage.local.remove(h,e)),e}return{}}();k(t);if(!localStorage.getItem(f))return e(),localStorage.setItem(f,"1"),void await I();e(t.opacity,t.blur);const i=async e=>{const{url:t}=e;if(await S(t,100))return void _(t);const i=await b();if(i){const e=await j(i),t=a.a.createObjectURL(e);_(t)}else await I()};try{switch(t.type){case"local":await(async e=>{const{currentP:t}=e,i=JSON.parse(localStorage.getItem("__wp__clean")),{rawUrl:o}=t;if(!i){await S(o)&&_(o)}const n=await b();if(n){const i=await j(n),o=a.a.createObjectURL(i);return t.rawUrl=o,k(e),void _(o)}return await I()})(t);break;case"bing":case"cloud":await i(t.currentP);break;case"color":await(async e=>{const{color:t}=e;t?x(t):await I()})(t);break;case"userLibraryAuto":case"cloudAuto":await(async e=>{const{currentP:t}=e;if(e.oneP)return void await i(t);if(!e.ready)return await i(t);if("when-newtab"!==e.switchType&&e.timeEnd>Date.now())return void await i(t);const{nextP:o}=e;await S(o.url,2e3)?(e.ready=!1,e.currentP=Object.assign({},o),delete e.nextP,k(e),_(o.url)):await i(t)})(t);break;case"default":default:await I()}}catch(e){console.log("something error got catch: ",e),await I()}localStorage.removeItem("__wp__clean")}},246:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return p}));i(13),i(17),i(10),i(52);var o=i(3),n=i(22),s=i(178),a=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};const r={},c=new Set;class l{constructor(){this.firstSync=!1,this.syncTabTime=0,this._lockRollback=!1,this.isRollbackFromStorage=!1,this.backupFileKey="",this.backupValueKeys=[],this.rollbackFromStorage=()=>null,this.stopToStorageReaction=()=>{},this.stopAutoBackupReaction=()=>{},this.convertBackupEquals=e=>e}async initSyncStore(e,t,i={},a,c=20){if(r[e])throw new Error("storage key 重复");r[e]=this,0!==t.length&&(this.rollbackFromStorage=async()=>{let s=!1;const r=Object.create(null);Object.keys(i).forEach(e=>{t.includes(e)&&(r[e]=i[e])});try{const i=await Object(n.b)(e,a),o=i?Object.keys(i):[];i&&o.forEach(e=>{t.includes(e)&&(r[e]=i[e])}),this.firstSync||i&&!t.some(e=>!o.includes(e))||(s=!0)}catch(e){console.error("storageSync",e)}this.isRollbackFromStorage=!0,this.stopToStorageReaction(),this.stopAutoBackupReaction(),Object(o.i)(()=>{for(const e in r)this[e]=r[e];this.firstSync||(this.firstSync=!0)}),this.restartAutoBackupReaction(),this.stopToStorageReaction=Object(o.h)(()=>{const e={};return t.forEach(t=>{e[t]=Object(o.j)(this[t])}),e},t=>{this.isRollbackFromStorage=!1,Object(n.e)(e,t,a),Object(o.i)(()=>{this.syncTabTime=Date.now()})},{equals:o.d.structural,delay:c,fireImmediately:s})},await this.rollbackFromStorage(),Object(o.h)(()=>this.syncTabTime,t=>{t&&s.slave.sendMessage("tabs-sync",e)},{delay:60}))}restartAutoBackupReaction(e=!1){this.stopAutoBackupReaction(),this.stopAutoBackupReaction=Object(o.h)(()=>{const e={};return this.backupValueKeys.forEach(t=>{e[t]=Object(o.j)(this[t])}),e},e=>{(async(e,t)=>{try{const{syncStore:o}=await Promise.all([i.e(6),i.e(8),i.e(34)]).then(i.bind(null,574));o.pushAutoBackupPipe({[e]:t})}catch(e){}})(this.backupFileKey,e).catch()},{fireImmediately:e,equals:(e,t)=>{const i=this.convertBackupEquals(e),n=this.convertBackupEquals(t);return o.d.structural(i,n)},delay:40})}initAutoBackup(e,t){if(c.has(e))throw new Error("file key 重复");c.add(e),0!==t.length&&(this.backupFileKey=e,this.backupValueKeys=[...t])}async getBackupData(){const e={};return this.backupValueKeys.forEach(t=>{e[t]=Object(o.j)(this[t])}),e}}a([o.g],l.prototype,"firstSync",void 0),a([o.g],l.prototype,"syncTabTime",void 0),a([o.b],l.prototype,"initSyncStore",null);const p=e=>{const t=r[e];(null==t?void 0:t._lockRollback)||t.rollbackFromStorage()}},247:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));i(10),i(13),i(17),i(52);var o=i(0),n=i(398),s=i(48),a=i.n(s),r=i(5);var c=i(81);const l=new class{constructor(){this.ga=null,this.localKey="analytics-status-time",this.gap=432e5,this.getPermission=async()=>{let e=!0;if(o.n)try{const{privacyStore:t}=await Promise.all([i.e(6),i.e(8),i.e(33)]).then(i.bind(null,581));1!==t.collectData&&(e=!1)}catch(t){e=!1}return e},this.trySendStatus=e=>{const t=localStorage.getItem(this.localKey);t?(Date.now()-Number(t)>this.gap||Number(t)>Date.now())&&this.sendStatus(e):this.sendStatus(e)},this.sendPageView=async e=>{if(!await this.getPermission())return;const t=this.ga.getPageviewUrl(e);c.c.sendLog(t)},this.sendEvent=async(e,t=!1)=>{await this.getPermission()&&Object.keys(e).forEach(i=>{const o=e[i];if("object"==typeof o)Object.keys(o).forEach(e=>{const n=o[e],s=this.ga.getEventUrl({category:i,action:e,label:String(n),nonInteraction:t});c.c.sendLog(s)});else{const e=this.ga.getEventUrl({category:i,action:String(o),nonInteraction:t});c.c.sendLog(e)}})},this.sendBaidu=async e=>{await this.getPermission()&&(async(e="")=>{const t=o.C.runtimePlatform;if(null==e?void 0:e.includes("baidu.com")){const i=new a.a(e).searchParams.get("tn"),n=`https://manage-api.infinitytab.com/analysis-manager/send/60efd763a741942ac60374e1?label=${o.B.baiduLabel}&action=${i}&event=${t}`;o.r?navigator.sendBeacon(n):r.a.post(n,null,{_proxy:!0})}})(e)},this.ga=new n.a({trackingId:o.B.trackingId})}async sendStatus(e){try{this.sendEvent(e,!0),localStorage.setItem(this.localKey,""+Date.now())}catch(e){}}}},250:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));const o=e=>{const t=n(e),i=s(e,t);return{searchWidth:t.width,searchHeight:t.height,searchMarginTop:t.marginTop,searchMarginBottom:t.marginBottom,searchRatio:t.searchRatio,iconBoxWidth:i.boxWidth,iconBoxHeight:i.boxHeight,iconOneHeight:i.iconOneHeight,iconWidth:i.width,miniIconPadding:i.miniIconPadding,iconRatio:i.iconRatio,iconsMargin:i.iconsMargin}},n=e=>{const{searchScale:t,innerHeight:i,innerWidth:o,miniMode:n,topBookmark:s,topUseful:a,mainRatio:r}=e;let c=0;a&&(c+=36),s&&(c+=36);const l=i-c,p=o-.2*o;let u=o,d=9*u/16;d>l&&(d=l,u=16*d/9);const h=u*(.575-.1818*Math.max(Math.min(720,u-1200),0)/720),g={width:h*t,height:d*(.0963-.0296*Math.max(Math.min(405,d-675),0)/405)*t};g.width>p&&(g.height=p/g.width*g.height,g.width=p);const m={width:g.width*r,height:g.height*r};let b=null;b=n?-.3:-.06;const f=g.width/h*r,y=Math.floor(b*l*f)+"px",w=Math.floor(.775*m.height)+"px";return{width:Math.floor(m.width)+"px",height:Math.floor(m.height)+"px",searchRatio:Number((m.width/625).toFixed(2)),marginTop:y,marginBottom:w,appContentWidth:p,appContentHeight:l,searcherSizeWithRatio:g}},s=(e,t)=>{const{row:i,col:o,rowGap:n,colGap:s,iconScale:a,innerWidth:r,mainRatio:c,fontSize:l}=e;let p=r;p<1200?p=1200:p>1920&&(p=1920);const{appContentHeight:u,appContentWidth:d,searcherSizeWithRatio:h}=t,g=d,m=.8*u-2.451*h.height,b=1+.5*(1920-p)/720,f=g/o,y=m/i,w=Math.min(Math.min(f,y)*a*b,f,y),k=(m-i*w)/i*n/2,O=o*(w+2*((g-o*w)/o*s/2));let j=Math.min(Math.ceil(O*c),r);let v=i*(w+2*k)*c;const S=w*c,x=1.3*Math.max(l*c,12)+.9*S*.08,_=1.2*(25+x);j<o*_&&(j=o*_),v<i*_&&(v=i*_);let T=.9*S-x-1;T<25&&(T=25);const M=.1*r*c;return{width:Math.floor(T)+"px",miniIconPadding:Math.floor(T/7+4)+"px",boxWidth:Math.ceil(j)+"px",boxHeight:Math.floor(v)+"px",iconOneHeight:Math.floor(v/i)+"px",iconRatio:Number((T/106).toFixed(2)),iconsMargin:Math.floor(M)+"px"}}},345:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var o=i(107),n=i.n(o),s=(i(13),i(17),i(10),i(3)),a=i(368),r=i.n(a),c=i(246),l=i(14),p=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};const u=[{text:i18n("todo_welcome"),todoId:"todo-id1dtkk87it2iepal6dv4hr2uig0c",time:Date.now(),updatetime:0,done:!1}];class d extends c.a{constructor(){super(...arguments),this.todoList=u,this.currenetState="done",this.listLength=localStorage.getItem("todo-length")||0}toggleState(e){this.currenetState=e}get needNotificationPermission(){return this.todoList.some(e=>!!e.dueDate)}diffRemote(e){const t=e=>{if(null==e?void 0:e.updatetime){const t={updatetime:void 0};return e.done=!!e.done,Object.assign(Object.assign({},e),t)}},i=r()(e.todoList||[],t),o=r()(Object(s.j)(this.todoList),t);return!s.d.structural(i,o)}mergeRemote(e,t){if(e.todoList)if(t)this.todoList=e.todoList;else{const t=this.todoList,i=e.todoList,{result:o}=l.a.mergeArray(t,i,"todoId");this.todoList=o}}edit(e){this.todoList=this.todoList.map(t=>t.todoId===e?Object.assign(Object.assign({},t),{edit:!t.edit}):t)}get hasDoneTodo(){return this.todoList.filter(e=>e.done).length}async addTodo(e){if(!n()(e).call(e).length)return;const t={done:!1,time:+new Date,todoId:l.a.randomId("todo-"),updatetime:await l.a.getTimestamp(),text:e};Object(s.i)(()=>{this.todoList=[t,...this.todoList]})}removeTodo(){this.todoList=this.todoList.filter(e=>!e.done)}deleteTodo(e){this.todoList=this.todoList.filter(t=>t.todoId!==e)}async toggleTodo(e){const t=await l.a.getTimestamp();Object(s.i)(()=>{this.todoList=this.todoList.map(i=>i.todoId===e?Object.assign(Object.assign({},i),{done:!i.done,updatetime:t}):Object.assign({},i))})}async updateTodo(e,t){const i=await l.a.getTimestamp();Object(s.i)(()=>{this.todoList=this.todoList.map(o=>o.todoId===e?Object.assign(Object.assign(Object.assign({},o),t),{updatetime:i,edit:!1}):Object.assign({},o))})}removeTime(e){this.todoList=this.todoList.map(t=>t.todoId===e?Object.assign(Object.assign({},t),{dueDate:"",dueTime:"",dueTimestamp:null}):t)}}p([s.g],d.prototype,"todoList",void 0),p([s.g],d.prototype,"currenetState",void 0),p([s.b],d.prototype,"toggleState",null),p([s.e],d.prototype,"needNotificationPermission",null),p([s.b],d.prototype,"mergeRemote",null),p([s.b],d.prototype,"edit",null),p([s.g],d.prototype,"listLength",void 0),p([s.e],d.prototype,"hasDoneTodo",null),p([s.b],d.prototype,"addTodo",null),p([s.b],d.prototype,"removeTodo",null),p([s.b],d.prototype,"deleteTodo",null),p([s.b],d.prototype,"toggleTodo",null),p([s.b],d.prototype,"updateTodo",null),p([s.b],d.prototype,"removeTime",null);const h=new d;h.initSyncStore("store-todo",["todoList","listLength"],{},!0),h.initAutoBackup("todo",["todoList"]),Object(s.c)(()=>{if(h.firstSync){const e=h.todoList.filter(e=>!e.done).length;Object(s.i)(()=>{h.listLength=e}),localStorage.setItem("todo-length",e+"")}}),Object(s.c)(()=>{let e=!1;const{todoList:t}=h;for(let i=0;i<t.length-1;i++){const{done:o}=t[i],n=t[i+1].done;if(o&&!n){e=!0;break}}e&&(Object(s.i)(()=>{const e=t.filter(e=>e.done),i=t.filter(e=>!e.done);h.todoList=[...i,...e]}),e=!1)},{delay:300})},358:function(e,t,i){"use strict";i.r(t);var o=i(7),n=i.n(o),s=(i(13),i(17),i(245)),a=i(390),r=i(1),c=i(3),l=r.b`.i-bubble {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 99999999;
}
.i-bubble.network-error .i-bubble-wrap,
.i-bubble.error .i-bubble-wrap,
.i-bubble.success .i-bubble-wrap {
  padding-left: 30px;
  padding-right: 32px;
}
.i-bubble + .i-bubble-mask {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.7);
  z-index: 999999;
  display: none;
  opacity: 0;
  transition: opacity 150ms ease-in 0s;
}
.i-bubble.loading + .i-bubble-mask {
  display: block;
}
.i-bubble.loading.popup + .i-bubble-mask {
  opacity: 1;
}
.i-bubble .i-bubble-wrap {
  margin: 0 auto;
  box-sizing: border-box;
  padding: 12px 20px;
  background-color: #333;
  box-shadow: 0px 2px 20px 0px rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  font-size: 14px;
  line-height: 1.4em;
  transition: opacity 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms, transform 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms;
  transform: scale(0.8);
  opacity: 0;
  box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);
  max-width: 600px;
}
.i-bubble.popup .i-bubble-wrap {
  transform: scale(1);
  opacity: 1;
}
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
.i-bubble .icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  margin-right: 12px;
  display: none;
}
.i-bubble .icon.icon-loading {
  animation: spin 700ms linear infinite;
}
.i-bubble .i-bubble-text {
  color: #e4e4e4;
  display: block;
  box-sizing: border-box;
  flex-grow: 1;
  width: 100%;
  word-break: break-all;
}
.i-bubble .i-bubble-button {
  width: 70px;
  height: 28px;
  color: #4caf50;
  background-color: initial;
  border: none;
  padding: 0;
  cursor: pointer;
  transition: color, background-color 200ms;
  border-radius: 4px;
  outline: none;
  max-width: 180px;
  margin-left: 46px;
  flex-shrink: 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.i-bubble .i-bubble-button:hover {
  background-color: rgba(76, 175, 80, 0.14);
}
`,p=i(14),u=i(23),d=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};const h=Object(u.a)("network-error.png",!1),g=Object(u.a)("error.png",!1),m=Object(u.a)("success.png",!1),b=Object(u.a)("loading.png",!1);class f extends s.a{constructor(){super(...arguments),this.popup=!1,this.showButton=!1}static _timeToHideHandler(e){if(e.showButton){const t=e.shadowRoot.querySelector(".i-bubble .i-bubble-button");t.onclick&&(t.onclick=null)}const t=e.shadowRoot.querySelector(".i-bubble > .i-bubble-wrap");let i=!1;const o=()=>{e.onmouseenter=null,e.onmouseleave=null,document.body.contains(e)&&document.body.removeChild(e),i=!0};t.addEventListener("transitionend",o,{once:!0}),t.addEventListener("transitioncancel",o,{once:!0}),setTimeout(()=>{i||o()},150),e.setPopup(!1)}static _setTimerToHide(e,t){this._clearTimerToHide(e),e.hideTimer=setTimeout(()=>this._timeToHideHandler(e),t)}static _clearTimerToHide(e){e.hideTimer&&(clearTimeout(e.hideTimer),e.hideTimer=null)}static _messageMisc(e,t,i){this.setText(e),document.body.appendChild(this),window.customElements.whenDefined("i-bubble").then(()=>(this.offsetWidth,this.setPopup(!0),new n.a(e=>requestAnimationFrame(e)))).then(()=>{i&&i(this)}),t>0&&f._setTimerToHide(this,t)}static message(e,t){const i=document.createElement("i-bubble");i.setType("message"),t=null!=t?t:this.duration,this._messageMisc.call(i,e,t)}static networkError(e,t){const i=document.createElement("i-bubble");i.setType("network-error"),t=null!=t?t:this.duration,this._messageMisc.call(i,e,t)}static success(e,t){const i=document.createElement("i-bubble");i.setType("success"),t=null!=t?t:this.duration,this._messageMisc.call(i,e,t)}static error(e,t){const i=document.createElement("i-bubble");i.setType("error"),t=null!=t?t:this.duration,this._messageMisc.call(i,e,t)}static popupLogin(e){const t=this.popup(i18n("reqeust_login_message"),{showButton:!0,btnValue:i18n("to_login"),type:"message",onBtnClick:null!=e?e:()=>{a.userStore.openModal()}}),i=Date.now();let o=this.duration2;t.onmouseenter=()=>{o=Date.now()-i,f._clearTimerToHide(t)},t.onmouseleave=()=>{f._setTimerToHide(t,o)}}static popupLoading(e){const t=this.popup(i18n("wallpaper_loading"),{duration:0,showButton:!0,btnValue:i18n("cancel"),type:"loading",onBtnClick:e});return()=>setTimeout(()=>this._timeToHideHandler(t),f.waitForReady)}static loading(e){const t=this.popup(e,{type:"loading",duration:0});return()=>setTimeout(()=>this._timeToHideHandler(t),f.waitForReady)}static popup(e,t){const{duration:i=this.duration2,btnValue:o,onBtnClick:n,type:s,showButton:a}=t,r=document.createElement("i-bubble");return r.setType(s),o&&r.setBtnValue(o),a&&r.setShowButton(a),this._messageMisc.call(r,e,i,()=>{if(r.showButton){r.shadowRoot.querySelector(".i-bubble .i-bubble-button").onclick=e=>{n&&n(e),this._timeToHideHandler(r)}}}),r}firstUpdated(){const e="\n      background-size: cover;\n      background-repeat: no-repeat;\n      background-position: center;\n      display: block;\n    ",t=document.createElement("style");t.appendChild(document.createTextNode(`\n      .i-bubble .icon.icon-network-error{\n        background-image: url(${h});${e}\n      }\n      .i-bubble .icon.icon-success{\n        background-image: url(${m});${e}\n      }\n      .i-bubble .icon.icon-error{\n        background-image: url(${g});${e}\n      }\n      .i-bubble .icon.icon-loading{\n        background-image: url(${b});${e}\n      }\n      `)),this.shadowRoot.appendChild(t)}render(){return r.e`
      <section class="i-bubble ${this.type}${this.popup?" popup":""}">
        <section class="i-bubble-wrap">
          <i class="icon icon-${this.type}"></i>
          <span class="i-bubble-text">${this.text}</span>
          <input
            class="i-bubble-button"
            type="button"
            .value=${this.btnValue}
            style="${this.showButton?"":"display: none;"}"
          />
        </section>
      </section>
      <section class="i-bubble-mask" @click=${p.a.stopBubble}></section>
    `}setType(e){this.type=e}setText(e){this.text=e}setBtnValue(e){this.btnValue=e}setPopup(e){this.popup=e}setShowButton(e){this.showButton=e}}f.duration=3e3,f.duration2=5e3,f.waitForReady=1e3/60,f.styles=l,d([c.g],f.prototype,"type",void 0),d([c.g],f.prototype,"text",void 0),d([c.g],f.prototype,"btnValue",void 0),d([c.g],f.prototype,"popup",void 0),d([c.g],f.prototype,"showButton",void 0),d([c.b],f.prototype,"setType",null),d([c.b],f.prototype,"setText",null),d([c.b],f.prototype,"setBtnValue",null),d([c.b],f.prototype,"setPopup",null),d([c.b],f.prototype,"setShowButton",null),window.customElements.define("i-bubble",f);t.default=f},359:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return s}));i(13),i(17);class o{constructor(){this._caches={},this._setCaches=e=>(...t)=>{this._caches[e]=t}}}const n=[],s=e=>new Proxy(e,{set:(e,t,i)=>null===i?(e[t]=i,!0):"function"==typeof e[t]?(console.warn("失败：重复注册"),!0):(e[t]=i,n.includes(t)&&delete e._caches[t],e._caches.hasOwnProperty(t)&&(e[t](...e._caches[t]),delete e._caches[t]),!0),get:(e,t)=>"function"==typeof e[t]?e[t]:e._setCaches(t)})},360:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var o=i(7),n=i.n(o),s=(i(10),i(0)),a=i(97);async function r(){if(s.r){if("granted"!==await new n.a(e=>{!function(){try{Notification.requestPermission().then()}catch(e){return!1}return!0}()?Notification.requestPermission(e):Notification.requestPermission().then(e)}))throw new Error}else await a.a.request(["notifications"])}},369:function(e,t,i){e.exports=i.p+"images/wallpaper.c4eff18.webp"},390:function(e,t,i){"use strict";i.r(t),i.d(t,"userStore",(function(){return j}));i(10),i(52),i(13),i(17),i(18);var o=i(7),n=i.n(o),s=i(251),a=i.n(s),r=i(105),c=i.n(r),l=i(3),p=i(246),u=i(81),d=i(0),h=i(122),g=i(26),m=i.n(g),b=i(188),f=i(178),y=i(392),w=i(391),k=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};class O extends p.a{constructor(){super(),this.isExpired=!1,this.isLogin=!1,this.token="",this.userInfo={},this.refreshToken="",this.mobileloginExpire=0,this.mobileloginUrl="",this.userProfilePromise=n.a.resolve(),this.wpColorUpdate=0,this.logining=!1,this.modalOpen=!1,this.removeAccountDisableSec=10,this.removeAccountDisableTimer=null,this.showLoginTipModal=!1,this.profileModal=!1,this.syncListModal=!1,this.isModify=!1,this.countdownTimer=null,this.checkMobileUrlTimer=null,this.isShowLogoutConfirm=!1,this.showConfirmOpt="",this.clearAllData=!1,this.loading=!1,this.URL=d.x}setWpColorUpdate(e){this.wpColorUpdate=e}closeModal(){this.modalOpen=!1}openModal(){this.modalOpen=!0}toggleLoginTipModal(){this.showLoginTipModal=!this.showLoginTipModal}closeLoginTipModal(){this.showLoginTipModal=!1}closeProfileModal(){this.profileModal=!1}openProfileModal(){this.profileModal=!0}closeSyncListModal(){this.syncListModal=!1}openSyncListModal(){this.syncListModal=!0}openModify(){this.isModify=!0}async modifyProfile(e){try{const t=await u.g.updateProfile(e);Object(l.i)(()=>{if(t&&0===t.code){const{user:{name:e,gender:i,avatar:o}}=t.data;this.userInfo.name=e,this.userInfo.gender=i,this.userInfo.avatar=o,this.closeModify()}else h.message.error(i18n("update_data_failure"))})}catch(e){h.message.error(e.message)}}async getUserProfile(){const e=await u.g.getUserProfile();Object(l.i)(()=>{if(e)if(0===e.code&&this.isLogin){const{gender:t,name:i,avatar:o}=e.data;this.userInfo.name=i,this.userInfo.gender=t,this.userInfo.avatar=o,this.userInfo["auto-backup"]=e.data["auto-backup"],this.userInfo["wp-color-update"]=e.data["wp-color-update"]}else 3012===e.code&&(h.message.error(e.message),this.exitAccount())})}async updateAvatar(e){try{return await u.g.uploadAvatar(e)}catch(e){h.message.error(i18n("upload_avatar_failure"))}}closeModify(){this.isModify=!1}thirdPartyLogin(e){let t;switch(this.logining=!0,e){case"facebook":t=this.URL+"/login/facebook";break;case"google":t=this.URL+"/login/google";break;case"qq":const e=encodeURIComponent("https://infinity-api.infinitynewtab.com/on-login/qq");t="https://graph.qq.com/oauth2.0/show?which=Login&display=pc&response_type=code&client_id=101410947&redirect_uri="+e;break;case"sina":t=this.URL+"/login/weibo";break;case"wechat":const i=encodeURIComponent("https://infinity-api.infinitynewtab.com/on-login/wechat");t="https://open.weixin.qq.com/connect/qrconnect?state=123&appid=wx5af98300f5d18d16&response_type=code&scope=snsapi_login&redirect_uri="+i}setTimeout(async()=>{const e=Math.floor(window.screenY+200),i=Math.floor(window.screenX+window.innerWidth/3),o=window.open(t,"_blank",`top=${e},left=${i},height=600,width=770,menubar=no,toolbar=yes,location=yes,status=no,resizable=no`);if(this.opener=o,d.n)return;const n=setInterval(()=>{o.postMessage({from:"origin_login"},"*")},300),s=e=>{if(!e.data&&!e.data.key&&"login"!==e.data.key)return;clearInterval(n),window.removeEventListener("message",s,!1);const{message:t}=e.data;this.login3rdSuccess(t)};window.addEventListener("message",s,!1)},300)}async login(e){const t=await u.g.login(e);Object(l.i)(()=>{if(!t||0!==t.code)throw h.message.error(t.message),new Error(t.code);this.loginEmailSuccess(t.data.user),this.setToken(t.data),this.setRefreshToken(t.data.refreshToken)})}async getMobileloginUrl(e=!1){if(e&&(this.mobileloginUrl="",this.mobileloginExpire=0),b.e){const{data:e,error:t}=await u.g.getMobileloginUrl();if(t)return void Object(l.i)(()=>{this.mobileloginExpire=0});Object(l.i)(()=>{this.mobileloginUrl=e.url,this.mobileloginExpire=Math.floor(e.expire/1e3)}),this.checkMobileloginUrl(e.code,e.type),0!==this.mobileloginExpire&&(this.countdownTimer=setInterval(()=>{Object(l.i)(()=>{this.mobileloginExpire-=1}),this.mobileloginExpire<=0&&clearInterval(this.countdownTimer)},1e3))}}async checkMobileloginUrl(e,t,i=5e3){b.e&&this.mobileloginExpire>3&&(clearTimeout(this.checkMobileUrlTimer),this.checkMobileUrlTimer=setTimeout(async()=>{const{data:o}=await u.g.checkMobileloginUrl(e,t);if(o&&o.expired)return clearInterval(this.countdownTimer),void Object(l.i)(()=>{this.mobileloginExpire=0});this.checkMobileloginUrl(e,t,i)},i))}async loginEmailSuccess(e){this.logining=!1,this.closeModal(),this.isLogin=!0,this.userInfo=e,this.isExpired=!1,this.settingLoginSuccess()}setUserData(e){this.logining=!1,this.closeModal(),this.isLogin=e.isLogin,this.userInfo=e,this.isExpired=!1;["token","refreshToken","isLogin"].forEach(e=>delete this.userInfo[e])}async login3rdSuccess(e){if(!e||!Object.keys(e).length)return void this.cancelLogin();const t=e["login-type"];if(["qq","wechat"].includes(t)){const t=await u.g.loginWithUid(e);0===t.code?Object(l.i)(()=>{this.setUserData(e),this.setToken(t.data),this.setRefreshToken(t.data.refreshToken)}):3006===t.code&&h.message.error("获取token失败")}else this.setUserData(e),this.setToken(e),this.setRefreshToken(e.refreshToken);this.settingLoginSuccess()}settingLoginSuccess(){w.b.changeSetting("view","isHideIcp",!0)}cancelLogin(){var e;this.logining=!1,null===(e=this.opener)||void 0===e||e.close()}toggleClear(e){this.clearAllData=e}logout(e){this.isShowLogoutConfirm=!0,this.showConfirmOpt=e,"remove"===e&&(this.removeAccountDisableSec=10,clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=setInterval(()=>{Object(l.i)(()=>{this.removeAccountDisableSec-=1,0===this.removeAccountDisableSec&&(clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=null)})},1e3))}async exitAccount(){this.loading=!0,this.isLogin=!1,this.userInfo={},this.clearToken(),await new n.a(e=>{setTimeout(()=>{this.clearAllData?this.clearAllStore().then(e):e(null)},200)}),this.clearAllData?window.location.reload():(Object(l.i)(()=>this.loading=!1),this.closeLogoutConfirm(),this.closeProfileModal(),d.r&&y.pluginStore.hideLast())}async deleteAccount(){this.loading=!0;const e=await u.g.deleteAccount();Object(l.i)(()=>{e&&0===e.code?this.exitAccount():(3012===e.code&&this.exitAccount(),h.message.error(e.message)),this.loading=!1})}preserveStorageKeys(){const e=[];return["store-privacy"].forEach(t=>e.push({key:t,data:localStorage.getItem(t)})),e}restoreKeysToStorage(e){e.forEach(({data:e,key:t})=>localStorage.setItem(t,e))}async clearAllStore(){this.stopAutoBackupReaction(),this.stopToStorageReaction();!d.r&&await new n.a(e=>chrome.storage.local.clear(e)),this._clearLocalStorage(["store-privacy","store-setting->permission","store-search->ignoreSuggest","first-installed"]),await this._deleteIdb(["store-notes","store-todo","store-sync","store-wallpaper","store-wallpaper-cache","infinity-image-base64"]),f.slave.sendMessage("tabs-reload")}async _deleteIdb(e){const t=await new n.a(e=>a()(m.a).call(m.a,(t,i)=>e(i)));await n.a.all(e.map(e=>new n.a(i=>{const o=e.split("->");if(1===o.length)return t.includes(e)?void m.a.removeItem(e,i):void i(null);i(null),t.includes(o[0])&&m.a.getItem(o[0],e=>{c()(o).call(o,(e,t,i)=>(i===o.length-1&&Reflect.deleteProperty(e,t),e[t]),e),m.a.setItem(o[0],i)})})))}_clearLocalStorage(e){const t=new Map;e.filter(Boolean).forEach(e=>{const i=e.split("->");if(1===i.length)return void t.set(e,localStorage.getItem(e));const o=JSON.parse(localStorage.getItem(i[0]));i.slice(1).forEach((e,t)=>{const n=0===t?o:o[i[t]];for(const t in n)e!==t&&Reflect.deleteProperty(n,t)}),t.set(i[0],JSON.stringify(o))}),localStorage.clear();for(const e of a()(t).call(t))localStorage.setItem(e,t.get(e))}closeLogoutConfirm(){this.isShowLogoutConfirm=!1}setToken(e){this.token=e.token}setRefreshToken(e){this.refreshToken=e}clearToken(){this.token="",this.refreshToken=""}setOutdated(){this.isExpired=!0,this.isLogin=!1}toggleReLogin(){this.isExpired=!1}}k([l.g],O.prototype,"isExpired",void 0),k([l.g],O.prototype,"isLogin",void 0),k([l.g],O.prototype,"token",void 0),k([l.g],O.prototype,"userInfo",void 0),k([l.g],O.prototype,"refreshToken",void 0),k([l.g],O.prototype,"mobileloginExpire",void 0),k([l.g],O.prototype,"mobileloginUrl",void 0),k([l.g],O.prototype,"wpColorUpdate",void 0),k([l.b],O.prototype,"setWpColorUpdate",null),k([l.g],O.prototype,"opener",void 0),k([l.g],O.prototype,"logining",void 0),k([l.g],O.prototype,"modalOpen",void 0),k([l.g],O.prototype,"removeAccountDisableSec",void 0),k([l.g],O.prototype,"removeAccountDisableTimer",void 0),k([l.b],O.prototype,"closeModal",null),k([l.b],O.prototype,"openModal",null),k([l.g],O.prototype,"showLoginTipModal",void 0),k([l.b],O.prototype,"toggleLoginTipModal",null),k([l.b],O.prototype,"closeLoginTipModal",null),k([l.g],O.prototype,"profileModal",void 0),k([l.g],O.prototype,"syncListModal",void 0),k([l.b],O.prototype,"closeProfileModal",null),k([l.b],O.prototype,"openProfileModal",null),k([l.b],O.prototype,"closeSyncListModal",null),k([l.b],O.prototype,"openSyncListModal",null),k([l.g],O.prototype,"isModify",void 0),k([l.b],O.prototype,"openModify",null),k([l.b],O.prototype,"modifyProfile",null),k([l.b],O.prototype,"getUserProfile",null),k([l.b],O.prototype,"updateAvatar",null),k([l.b],O.prototype,"closeModify",null),k([l.b],O.prototype,"thirdPartyLogin",null),k([l.b],O.prototype,"login",null),k([l.b],O.prototype,"getMobileloginUrl",null),k([l.b],O.prototype,"checkMobileloginUrl",null),k([l.b],O.prototype,"loginEmailSuccess",null),k([l.b],O.prototype,"setUserData",null),k([l.b],O.prototype,"login3rdSuccess",null),k([l.b],O.prototype,"cancelLogin",null),k([l.g],O.prototype,"isShowLogoutConfirm",void 0),k([l.g],O.prototype,"showConfirmOpt",void 0),k([l.g],O.prototype,"clearAllData",void 0),k([l.b],O.prototype,"toggleClear",null),k([l.b],O.prototype,"logout",null),k([l.g],O.prototype,"loading",void 0),k([l.b],O.prototype,"exitAccount",null),k([l.b],O.prototype,"deleteAccount",null),k([l.b],O.prototype,"clearAllStore",null),k([l.b],O.prototype,"closeLogoutConfirm",null),k([l.b],O.prototype,"setToken",null),k([l.b],O.prototype,"setRefreshToken",null),k([l.b],O.prototype,"clearToken",null),k([l.b],O.prototype,"setOutdated",null),k([l.b],O.prototype,"toggleReLogin",null);const j=new O;Object(l.c)(()=>{j.isLogin&&(j.userProfilePromise=j.getUserProfile())}),j.initSyncStore("store-user",["userInfo","isLogin","token","refreshToken","wpColorUpdate"])},391:function(e,t,i){"use strict";i.d(t,"b",(function(){return m})),i.d(t,"a",(function(){return f}));i(13),i(17),i(18),i(10),i(52);var o=i(3),n=i(246),s=i(14),a=i(97),r=i(130),c=i(250),l=i(0),p=i(345),u=i(360),d=i(247),h=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};class g extends n.a{constructor(){super(...arguments),this.localSettings={},this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.iconSpaceWidth=0,this.iconSpaceHeight=0,this.setting=this.init(),this.updatetime=0,this.permission={topUseful:-1,topBookmark:-1,searchSuggest:-1,gmailNotice:-1,gmailCount:-1,todoNotice:-1},this.logs=new Map,this.permissionMapper={topBookmark:[["bookmarks"],["chrome://favicon/"]],topUseful:[["topSites"],["chrome://favicon/"]],searchSuggest:[[],["https://suggestion.baidu.com/","https://google.com/"]],gmailNotice:[["notifications"],["https://mail.google.com/"]],gmailCount:[[],["https://mail.google.com/"]],todoNotice:[["notifications"],[]]},this.showSettingHomeModal=!1,this.webClickName=""}init(e={}){return{notice:Object.assign({},r.b.notice),link:Object.assign({},r.b.link),view:Object.assign({},r.b.view),layout:Object.assign({},r.b.layout),animation:Object.assign({},r.b.animation),icon:Object.assign({},r.b.icon),search:Object.assign({},r.b.search),font:Object.assign({},r.b.font),_v1Setting:e}}get withPermissionTopUseful(){return this.setting.view.topUseful&&1===this.permission.topUseful}get withPermissionTopBookmark(){return this.setting.view.topBookmark&&1===this.permission.topBookmark}get withPermissionSearchSuggest(){return this.setting.search.searchSuggest&&1===this.permission.searchSuggest}get needPermissionList(){const e=[],{view:t,notice:i,search:o}=this.setting,{topUseful:n,topBookmark:s,searchSuggest:a,gmailNotice:r,gmailCount:c,todoNotice:u}=this.permission;return l.m&&o.searchSuggest&&1!==a&&e.push({key:"searchSuggest",title:i18n("permission_serch_suggest_title"),content:i18n("permission_serch_suggest_content")}),l.m&&i.gmail&&1!==r&&e.push({key:"gmailNotice",title:i18n("permission_gmail_notice_title"),content:i18n("permission_gmail_notice_content")}),l.m&&i.gmailNumber&&1!==c&&e.push({key:"gmailCount",title:i18n("permission_gmail_num_title"),content:i18n("permission_gmail_num_content")}),!l.r&&t.topBookmark&&1!==s&&e.push({key:"topBookmark",title:i18n("permission_top_bookmark_title"),content:i18n("permission_top_bookmark_content")}),!l.r&&t.topUseful&&1!==n&&e.push({key:"topUseful",title:i18n("permission_top_useful_title"),content:i18n("permission_top_useful_content")}),p.a.needNotificationPermission&&1!==u&&(l.r&&"denied"===Notification.permission||e.push({key:"todoNotice",title:i18n("permission_todo_notice_title"),content:i18n("permission_todo_notice_content")})),e}get sideRatio(){return this.setting.view.scaleSide}reset(){this.setting=this.init(this.setting._v1Setting)}diffRemote(e){return!o.d.structural(e.setting||{},this.setting)}sendSettingValue(){Object.keys(this.localSettings).length&&(d.a.sendEvent({settingValue:this.localSettings}),this.localSettings={})}async mergeRemote(e){const t=e.setting;if(!e.setting)return;const i=this.setting;this.setting={notice:Object.assign(Object.assign({},i.notice),t.notice),link:Object.assign(Object.assign({},i.link),t.link),view:Object.assign(Object.assign({},i.view),t.view),layout:Object.assign(Object.assign({},i.layout),t.layout),animation:Object.assign(Object.assign({},i.animation),t.animation),icon:Object.assign(Object.assign({},i.icon),t.icon),search:Object.assign(Object.assign({},i.search),t.search),font:Object.assign(Object.assign({},i.font),t.font),_v1Setting:t._v1Setting};const n=await s.a.getTimestamp();Object(o.i)(()=>{this.updatetime=n})}sendSettingLog(e,t){this.logs.has(e)&&clearTimeout(this.logs.get(e)),this.logs.set(e,setTimeout(()=>{d.a.sendEvent({settingAction:{[e]:t}}),this.logs.delete(e)},2e3))}async changeSetting(e,t,i){if(this.setting[e][t]===i)return;this.setting[e][t]=i;let n=`${e}_${t}`,a=i;"layout"!==e||"col"!==t&&"row"!==t||(n="layout",a=this.setting.layout.row+"*"+this.setting.layout.col),this.sendSettingLog(n,a),this.localSettings[n]=a;const r=await s.a.getTimestamp();Object(o.i)(()=>{this.updatetime=r}),this.changeSettingEffect(e,t,i)}changeSettingEffect(e,t,i){switch(!0){case"topBookmark"===t:i&&this.requestPermission("topBookmark",!0);break;case"topUseful"===t:i&&this.requestPermission("topUseful",!0);break;case"notice"===e&&"gmail"===t:i&&this.requestPermission("gmailNotice",!0);break;case"notice"===e&&"gmailNumber"===t:i&&this.requestPermission("gmailCount",!0);break;case"searchSuggest"===t:i&&this.requestPermission("searchSuggest",!0)}}async checkPermission(e){if(l.r){switch(e){case"todoNotice":"granted"===Notification.permission?this.permission[e]=1:"default"===Notification.permission?this.permission[e]=-1:this.permission[e]=0}return}if(1===this.permission[e])return;const t=this.permissionMapper[e];try{await a.a.has(t[0],t[1])&&Object(o.i)(()=>{this.permission[e]=1})}catch(e){}}async requestPermission(e,t=!1){if(l.r&&["todoNotice"].includes(e))return await Object(u.a)(),void Object(o.i)(()=>{this.permission.todoNotice=1});const i=this.permissionMapper[e];if(t||0!==this.permission[e]&&1!==this.permission[e])try{await a.a.request(i[0],i[1]),Object(o.i)(()=>{this.permission[e]=1}),"gmailNotice"===e&&this.checkPermission("todoNotice")}catch(t){t&&"REJECT"===t.message&&Object(o.i)(()=>{this.permission[e]=0})}}async requestAllPermission(){if(l.r)return await Object(u.a)(),void Object(o.i)(()=>{this.permission.todoNotice=1});const e=[[],[]];this.needPermissionList.forEach(t=>{const i=this.permissionMapper[t.key];e[0].push(...i[0]),i&&e[1].push(...i[1])});try{await a.a.request(e[0],e[1]),Object(o.i)(()=>{this.needPermissionList.forEach(e=>{this.permission[e.key]=1})})}catch(e){Object(o.i)(()=>{this.needPermissionList.forEach(e=>{this.permission[e.key]=0})})}}resetPermission(e){this.permission[e]=-1}setIconSpace(e){this.setting.icon.scale=e.iconScale,this.setting.layout.colGap=e.colGap,this.setting.layout.rowGap=e.rowGap,this.setting.search.scale=e.searchScale}openSearchSuggest(){this.setting.search.searchSuggest?this.requestPermission("searchSuggest",!0):this.setting.search.searchSuggest=!0}get sideScaleRatio(){return this.setting.view.scaleSide}toggleShowSettingHome(e){this.setting.view.isShowHomepageBtn=!e}toggleSettingHomeModal(){this.webClickName="",this.showSettingHomeModal=!this.showSettingHomeModal}closeSettingHomeModal(){this.showSettingHomeModal=!1}setWebClickName(e){this.webClickName=e}}h([o.g],g.prototype,"innerWidth",void 0),h([o.g],g.prototype,"innerHeight",void 0),h([o.g],g.prototype,"iconSpaceWidth",void 0),h([o.g],g.prototype,"iconSpaceHeight",void 0),h([o.g],g.prototype,"setting",void 0),h([o.g],g.prototype,"updatetime",void 0),h([o.g],g.prototype,"permission",void 0),h([o.e],g.prototype,"withPermissionTopUseful",null),h([o.e],g.prototype,"withPermissionTopBookmark",null),h([o.e],g.prototype,"withPermissionSearchSuggest",null),h([o.e],g.prototype,"needPermissionList",null),h([o.e],g.prototype,"sideRatio",null),h([o.b],g.prototype,"reset",null),h([o.b],g.prototype,"mergeRemote",null),h([o.b],g.prototype,"changeSetting",null),h([o.b],g.prototype,"checkPermission",null),h([o.b],g.prototype,"requestPermission",null),h([o.b],g.prototype,"requestAllPermission",null),h([o.b],g.prototype,"resetPermission",null),h([o.b],g.prototype,"setIconSpace",null),h([o.b],g.prototype,"openSearchSuggest",null),h([o.e],g.prototype,"sideScaleRatio",null),h([o.b],g.prototype,"toggleShowSettingHome",null),h([o.g],g.prototype,"showSettingHomeModal",void 0),h([o.b],g.prototype,"toggleSettingHomeModal",null),h([o.b],g.prototype,"closeSettingHomeModal",null),h([o.g],g.prototype,"webClickName",void 0),h([o.b],g.prototype,"setWebClickName",null);const m=new g;m.initSyncStore("store-setting",["setting","permission","updatetime"],r.b),m.initAutoBackup("setting",["setting"]),Object(o.c)(()=>{m.firstSync&&m.setting.view.topBookmark&&m.checkPermission("topBookmark")},{delay:50}),Object(o.c)(()=>{m.firstSync&&m.setting.view.topUseful&&m.checkPermission("topUseful")},{delay:50}),Object(o.c)(()=>{m.firstSync&&m.setting.notice.gmail&&m.checkPermission("gmailNotice")},{delay:50}),Object(o.c)(()=>{p.a.firstSync&&p.a.needNotificationPermission&&m.checkPermission("todoNotice")},{delay:50}),Object(o.c)(()=>{m.firstSync&&m.setting.notice.gmailNumber&&m.checkPermission("gmailCount")},{delay:50}),Object(o.c)(()=>{m.firstSync&&m.setting.search.searchSuggest&&m.checkPermission("searchSuggest")},{delay:50}),Object(o.c)(()=>{m.firstSync&&1===m.permission.gmailNotice&&s.a.send({key:"bg-notice-gmail-permission",data:!0})}),Object(o.c)(()=>{if(m.firstSync){const{gmail:e,gmailVoice:t,gmailNumber:i}=m.setting.notice,{gmailCount:o,gmailNotice:n}=m.permission;s.a.send({key:"bg-notice-gmail-updated",data:{gmail:e&&1===n,gmailVoice:t,gmailNumber:i&&(1===n||1===o)}})}},{delay:100}),Object(o.c)(()=>{if(!0===m.setting.layout.custom){const{customItem:e}=m.setting.layout;Object(o.i)(()=>{m.setting.layout.row=e[0],m.setting.layout.col=e[1]})}}),Object(o.c)(()=>{if(m.firstSync){const e={"--side-ratio":m.sideRatio,"--main-ratio":m.setting.view.scaleMain,"--icon-radius":Math.round(100*m.setting.icon.radius)+"%","--icon-font-color":m.setting.font.color,"--icon-font-size":Math.ceil(Math.max(m.setting.font.size*m.setting.view.scaleMain,12))+"px","--icon-opacity":m.setting.icon.opacity,"--icon-visible":m.setting.icon.isHideIconName?"hidden":"visible","--search-radius":""+m.setting.search.radius,"--search-opacity":m.setting.search.opacity};s.a.setStyle(e)}},{delay:50}),Object(o.c)(()=>{if(m.firstSync){let e=0,t=20;m.withPermissionTopBookmark&&(e+=36),m.withPermissionTopUseful&&(t+=26);const i={"--top-bar-height":e+"px","--settings-icon-top-offset":t+"px"};s.a.setStyle(i)}});const b=e=>{const t={"--search-height":e.searchHeight,"--search-width":e.searchWidth,"--search-margin-top":e.searchMarginTop,"--search-margin-bottom":e.searchMarginBottom,"--search-ratio":e.searchRatio,"--icon-box-width":e.iconBoxWidth,"--icon-box-height":e.iconBoxHeight,"--icon-one-height":e.iconOneHeight,"--icon-width":e.iconWidth,"--mini-icon-padding":e.miniIconPadding,"--icon-ratio":e.iconRatio,"--icon-row":m.setting.layout.row,"--icon-col":m.setting.layout.col,"--main-icons-margin":e.iconsMargin};s.a.setStyle(t)},f=(e=!0)=>{const t={row:m.setting.layout.row,col:m.setting.layout.col,rowGap:m.setting.layout.rowGap,colGap:m.setting.layout.colGap,iconScale:m.setting.icon.scale,searchScale:m.setting.search.scale,innerHeight:innerHeight,innerWidth:innerWidth,miniMode:m.setting.icon.miniMode,fontSize:m.setting.font.size,topUseful:m.withPermissionTopUseful,topBookmark:m.withPermissionTopBookmark,mainRatio:m.setting.view.scaleMain};if(e)requestIdleCallback(()=>{const e=Object(c.a)(t);b(e)});else{const e=Object(c.a)(t);b(e)}};Object(o.c)(()=>{m.firstSync&&f(!1)},{delay:40}),window.addEventListener("resize",s.a.throttle(()=>{f(!1)},56))},392:function(e,t,i){"use strict";i.r(t),i.d(t,"pluginStore",(function(){return p}));i(13),i(17),i(10);var o=i(3),n=i(97),s=i(359);class a extends s.a{opened(e){}}const r=Object(s.b)(new a);var c=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};class l{constructor(){this.pluginsMap={"infinity://weather":"side-weather","infinity://todos":"side-todos","infinity://notes":"side-notes","infinity://history":"side-history","infinity://bookmarks":"side-bookmarks","infinity://extension":"side-extension","infinity://chrome-apps":"chrome-apps","infinity://wallpaper":"wallpaper","infinity://settings":"side-profile",search:"side-search",profile:"side-profile",editIcon:"side-editicon","side-tutorial":"side-tutorial"},this.pluginsTags={"side-weather":!1,"side-todos":!1,"side-notes":!1,"side-history":!1,"side-bookmarks":!1,"side-extension":!1,"chrome-apps":!1,"side-profile":!1,"side-search":!1,"side-editicon":!1,"side-tutorial":!1,wallpaper:!1},this.pluginViews=[],this.focusRepair=!1,Object(o.h)(()=>this.pluginViews.map(e=>e),([e])=>{r.opened(e)})}initDom(e){this.pluginsTags[e]=!0}async show(e){if(this.pluginViews.includes(e))return;const t=this.pluginsMap[e];if(!1===this.pluginsTags[t])try{await this.requestPermission(t),Object(o.i)(()=>{this.pluginsTags[t]=!0,this.pluginViews.push(e)})}catch(e){}else this.pluginViews.push(e)}async showRepair(){this.focusRepair=!0,this.show("profile"),localStorage.setItem("user-checkout-old-data","true")}blurRepair(){this.focusRepair=!1}requestPermission(e){switch(e){case"side-bookmarks":return n.a.request(["bookmarks"],["chrome://favicon/"]);case"side-extension":case"chrome-apps":return n.a.request(["management"]);case"side-history":return n.a.request(["history"],["chrome://favicon/"])}}hideLast(){const e=this.pluginViews.pop();return 0===this.pluginViews.length&&document.getElementsByTagName("newtab-main")[0].shadowRoot.querySelector(".swiper-content").style.setProperty("transform","none"),e}}c([o.g],l.prototype,"pluginsTags",void 0),c([o.b],l.prototype,"initDom",null),c([o.g],l.prototype,"pluginViews",void 0),c([o.g],l.prototype,"focusRepair",void 0),c([o.b],l.prototype,"show",null),c([o.b],l.prototype,"showRepair",null),c([o.b],l.prototype,"blurRepair",null),c([o.b],l.prototype,"hideLast",null);const p=new l},393:function(e,t,i){e.exports=i.p+"images/error.f782e7c.png"},394:function(e,t,i){e.exports=i.p+"images/remind.896ff6f.png"},581:function(e,t,i){"use strict";i.r(t),i.d(t,"LocalSync",(function(){return n.a})),i.d(t,"syncTabsStore",(function(){return n.b})),i.d(t,"pluginStore",(function(){return s.pluginStore})),i.d(t,"userStore",(function(){return a.userStore})),i.d(t,"settingStore",(function(){return r.b})),i.d(t,"requestCalcSize",(function(){return r.a})),i.d(t,"siteStore",(function(){return c.a})),i.d(t,"searchStore",(function(){return l.a})),i.d(t,"wallpaperStore",(function(){return p.a})),i.d(t,"todoStore",(function(){return u.a})),i.d(t,"noteStore",(function(){return d.a})),i.d(t,"weatherStore",(function(){return h.weatherStore})),i.d(t,"gmailStore",(function(){return b})),i.d(t,"syncStore",(function(){return f.syncStore})),i.d(t,"privacyStore",(function(){return k}));var o=i(3),n=i(246),s=i(392),a=i(390),r=i(391),c=i(585),l=i(586),p=i(583),u=i(345),d=i(587),h=i(584),g=(i(13),i(17),function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a});class m extends n.a{constructor(){super(...arguments),this.unreadEmailCount=null}update(e){this.unreadEmailCount!==e&&(this.unreadEmailCount=e)}}g([o.g],m.prototype,"unreadEmailCount",void 0),g([o.b],m.prototype,"update",null);const b=new m;b.initSyncStore("store-gmail",["unreadEmailCount"]);var f=i(574),y=function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};class w extends n.a{constructor(){super(...arguments),this.userDate=0,this.collectData=0}agreeUserData(){this.userDate=1}refuseUserData(){this.userDate=-1}resetUserData(){this.userDate=0}agreeCollectData(){this.collectData=1}refuseCollectData(){this.collectData=-1}}y([o.g],w.prototype,"userDate",void 0),y([o.g],w.prototype,"collectData",void 0),y([o.b],w.prototype,"agreeUserData",null),y([o.b],w.prototype,"refuseUserData",null),y([o.b],w.prototype,"resetUserData",null),y([o.b],w.prototype,"agreeCollectData",null),y([o.b],w.prototype,"refuseCollectData",null);const k=new w;k.initSyncStore("store-privacy",["userDate","collectData"]),Object(o.f)({enforceActions:"observed"})}}]);